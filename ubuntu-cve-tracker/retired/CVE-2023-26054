Candidate: CVE-2023-26054
PublicDate: 2023-03-06 19:15:00 UTC
References:
 https://github.com/moby/buildkit/security/advisories/GHSA-gc89-7gcr-jxqc
 https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/ZTE4ITXXPIWZEQ4HYQCB6N6GZIMWXDAI/
 https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/LYZOKMMVX4SIEHPJW3SJUQGMO5YZCPHC/
 https://lists.fedoraproject.org/archives/list/package-announce@lists.fedoraproject.org/message/XNF4OLYZRQE75EB5TW5N42FSXHBXGWFE/
 https://www.cve.org/CVERecord?id=CVE-2023-26054
Description:
 BuildKit is a toolkit for converting source code to build artifacts in an
 efficient, expressive and repeatable manner. In affected versions when the
 user sends a build request that contains a Git URL that contains
 credentials and the build creates a provenance attestation describing that
 build, these credentials could be visible from the provenance attestation.
 Git URL can be passed in two ways: 1) Invoking build directly from a URL
 with credentials. 2) If the client sends additional version control system
 (VCS) info hint parameters on builds from a local source. Usually, that
 would mean reading the origin URL from `.git/config` file. When a build is
 performed under specific conditions where credentials were passed to
 BuildKit they may be visible to everyone who has access to provenance
 attestation. Provenance attestations and VCS info hints were added in
 version v0.11.0. Previous versions are not vulnerable. In v0.10, when
 building directly from Git URL, the same URL could be visible in
 `BuildInfo` structure that is a predecessor of Provenance attestations.
 Previous versions are not vulnerable. This bug has been fixed in v0.11.4.
 Users are advised to upgrade. Users unable to upgrade may disable VCS info
 hints by setting `BUILDX_GIT_INFO=0`. `buildctl` does not set VCS hints
 based on `.git` directory, and values would need to be passed manually with
 `--opt`.
Ubuntu-Description:
Notes:
 alexmurray> Traditionally the docker.io source package contained both the
 alexmurray> library and docker application. However, in releases that
 alexmurray> contain the
 alexmurray> docker.io-app source package, the docker.io source package
 alexmurray> contains only
 alexmurray> the library whilst the docker application itself is contained
 alexmurray> in the
 alexmurray> docker.io-app package.
 sbeattie> docker packages contain an embedded copy of github:moby/buildkit
 0xnishit> docker packages contains old version (v0.8.0) of moby/buildkit
Mitigation:
Bugs:
Priority: medium
Discovered-by:
Assigned-to:
CVSS:
 nvd: CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:N/A:N [6.5 MEDIUM]
 github: CVSS:3.1/AV:N/AC:L/PR:N/UI:R/S:U/C:H/I:N/A:N [6.5 MEDIUM]


Patches_docker.io:
 upstream: https://github.com/moby/buildkit/commit/75123c696506bdbca1ed69906479e200f1b62604
upstream_docker.io: needs-triage
trusty_docker.io: ignored (end of standard support)
xenial_docker.io: ignored (end of standard support)
esm-infra/xenial_docker.io: not-affected (code not present)
bionic_docker.io: ignored (end of standard support)
esm-apps/bionic_docker.io: not-affected (code not present)
focal_docker.io: not-affected (code not present)
esm-apps/focal_docker.io: not-affected (code not present)
jammy_docker.io: not-affected (code not present)
esm-apps/jammy_docker.io: not-affected (code not present)
mantic_docker.io: not-affected (code not present)
noble_docker.io: not-affected (code not present)
esm-apps/noble_docker.io: not-affected (code not present)
devel_docker.io: not-affected (code not present)

Patches_docker.io-app:
upstream_docker.io-app: needs-triage
trusty_docker.io-app: ignored (end of standard support)
xenial_docker.io-app: DNE
bionic_docker.io-app: DNE
focal_docker.io-app: not-affected (24.0.5-0ubuntu1~20.04.1)
esm-infra/focal_docker.io-app: DNE (focal was not-affected [24.0.5-0ubuntu1~20.04.1])
jammy_docker.io-app: not-affected (24.0.5-0ubuntu1~22.04.1)
mantic_docker.io-app: not-affected (24.0.5-0ubuntu1)
noble_docker.io-app: not-affected (24.0.7-0ubuntu)
esm-apps/noble_docker.io-app: not-affected (24.0.7-0ubuntu)
devel_docker.io-app: not-affected (24.0.7-0ubuntu)

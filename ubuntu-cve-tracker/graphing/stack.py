#!/usr/bin/env python2
#
# SPDX-License-Identifier: GPL-3.0-only
#
# This file is part of the Ubuntu CVE Tracker (UCT) scripts, its purpose is to
# report and graph release package counts.
#
# Author: Steve Beattie <steve.beattie@canonical.com>
# Author: Alex Murray <alex.murray@canonical.com>
# Copyright 2008 Canonical Ltd.
#
# This program is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License version 3, as published by the
# Free Software Foundation.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,
# SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <http://www.gnu.org/licenses/>.



releases = ['warty','hoary','breezy','dapper','edgy','feisty','gutsy','hardy','intrepid']

print '''
set term png small size 640,480
set output "packages.png"

set key off
set xrange [-1:%d]
set offsets 0, 0, 100, 0
set boxwidth 0.2

set grid ytics
set ylabel "Packages in main/restricted (i386)"
''' % (len(releases))


tics = []
plots = []
index = -1
for rel in releases:
    index += 1
    x, y = file("%s.data" % (rel)).readline().strip().split(' ')[1:3]
    print 'set label "%d" center at %d,%d' % (int(y), int(x), int(y)+100)

    plots.append('"%s.data" using 2:3:xtic(1) title "%s" with boxes fs solid lc 1' % (rel, rel))

print "plot " + ", ".join(plots)

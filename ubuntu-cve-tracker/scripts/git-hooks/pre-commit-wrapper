#!/bin/bash
#
# SPDX-License-Identifier: GPL-3.0-only 
#
# This file is part of the Ubuntu CVE Tracker (UCT) scripts, its purpose is to
# serve as a git pre-commit hook wrapper.
#
# Author: Alex Murray <alex.murray@canonical.com>
# Author: Maria Emilia Torino <emilia.torino@canonical.com>
# Copyright 2019 Canonical Ltd.
#
# This program is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License version 3, as published by the
# Free Software Foundation.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,
# SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <http://www.gnu.org/licenses/>.


CURRENT_DIR=$(dirname "$0")
${CURRENT_DIR}/pre-commit-syntax-check "$@"
CHECK_SYNTAX_STATUS=$?
if [[ $CHECK_SYNTAX_STATUS == 0 ]]; then
  for checker in pyflakes3 emacs; do
    ${CURRENT_DIR}/pre-commit-$checker "$@"
    CHECKER_STATUS=$?
    if [[ $CHECKER_STATUS != 0 ]]; then
      exit $CHECKER_STATUS
    fi
  done
else
   exit $CHECK_SYNTAX_STATUS
fi


#!/usr/bin/env python2
#
# SPDX-License-Identifier: GPL-3.0-only 
#
# This file is part of the Ubuntu CVE Tracker (UCT) scripts, its purpose is to
# duplicate the statuses from one CVE to another.

#
# Author: Kees Cook <kees@ubuntu.com>
# Copyright 2010 Canonical Ltd.
#
# This program is free software: you can redistribute it and/or modify it under
# the terms of the GNU General Public License version 3, as published by the
# Free Software Foundation.
#
# This program is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranties of MERCHANTABILITY,
# SATISFACTORY QUALITY, or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
# General Public License for more details.
#
# You should have received a copy of the GNU General Public License along with
# this program. If not, see <http://www.gnu.org/licenses/>.

import optparse
import os
import cve_lib

parser = optparse.OptionParser()
(options, args) = parser.parse_args()

cvedir = cve_lib.active_dir
source_filename = os.path.join(cvedir, args[0])
status = "\n\n".join(open(source_filename, "r").read().split('\n\n')[1:])

filename = os.path.join(cvedir, args[1])
with open(filename, "r") as f:
    header = f.read().split('\n\n')[0]

with open(filename + '.new','w') as f:
    f.write('%s\n\n%s' % (header, status))
os.rename(filename + '.new', filename)

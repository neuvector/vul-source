Candidate: CVE-2023-31038
PublicDate: 2023-05-08 09:15:00 UTC
References:
 https://lists.apache.org/thread/vgjlpdf353vv91gryspwxrzj6p0fbjd9
 https://www.cve.org/CVERecord?id=CVE-2023-31038
Description:
 SQL injection in Log4cxx when using the ODBC appender to send log messages
 to a database. No fields sent to the database were properly escaped for SQL
 injection. This has been the case since at least version 0.9.0(released
 2003-08-06) Note that Log4cxx is a C++ framework, so only C++ applications
 are affected. Before version 1.1.0, the ODBC appender was automatically
 part of Log4cxx if the library was found when compiling the library. As of
 version 1.1.0, this must be both explicitly enabled in order to be compiled
 in. Three preconditions must be met for this vulnerability to be possible:
 1. Log4cxx compiled with ODBC support(before version 1.1.0, this was
 auto-detected at compile time) 2. ODBCAppender enabled for logging messages
 to, generally done via a config file 3. User input is logged at some point.
 If your application does not have user input, it is unlikely to be
 affected. Users are recommended to upgrade to version 1.1.0 which properly
 binds the parameters to the SQL statement, or migrate to the new DBAppender
 class which supports an ODBC connection in addition to other databases.
 Note that this fix does require a configuration file update, as the old
 configuration files will not configure properly. An example is shown below,
 and more information may be found in the Log4cxx documentation on the
 ODBCAppender. Example of old configuration snippet: <appender
 name="SqlODBCAppender" class="ODBCAppender"> <param name="sql"
 value="INSERT INTO logs (message) VALUES ('%m')" /> ... other params here
 ... </appender> The migrated configuration snippet with new ColumnMapping
 parameters: <appender name="SqlODBCAppender" class="ODBCAppender"> <param
 name="sql" value="INSERT INTO logs (message) VALUES (?)" /> <param
 name="ColumnMapping" value="message"/> ... other params here ...
 </appender>
Ubuntu-Description:
Notes:
Mitigation:
Bugs:
Priority: medium
Discovered-by:
Assigned-to:
CVSS:
 nvd: CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:H/I:H/A:H [8.8 HIGH]

Patches_log4cxx:
upstream_log4cxx: needs-triage
trusty_log4cxx: ignored (end of standard support)
trusty/esm_log4cxx: ignored (end of ESM support, was needs-triage)
esm-infra-legacy/trusty_log4cxx: needs-triage
xenial_log4cxx: ignored (end of standard support)
esm-apps/xenial_log4cxx: needs-triage
bionic_log4cxx: ignored (end of standard support, was needs-triage)
esm-apps/bionic_log4cxx: needs-triage
focal_log4cxx: needs-triage
esm-apps/focal_log4cxx: needs-triage
jammy_log4cxx: needs-triage
esm-apps/jammy_log4cxx: needs-triage
kinetic_log4cxx: ignored (end of life, was needs-triage)
lunar_log4cxx: ignored (end of life, was needs-triage)
mantic_log4cxx: ignored (end of life, was needs-triage)
noble_log4cxx: needs-triage
esm-apps/noble_log4cxx: needs-triage
oracular_log4cxx: needs-triage
plucky_log4cxx: needs-triage
devel_log4cxx: needs-triage

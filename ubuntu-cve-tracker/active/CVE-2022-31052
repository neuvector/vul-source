Candidate: CVE-2022-31052
PublicDate: 2022-06-28 17:15:00 UTC
References:
 https://github.com/matrix-org/synapse/security/advisories/GHSA-22p3-qrh9-cx32
 https://spec.matrix.org/v1.2/client-server-api/#get_matrixmediav3preview_url
 https://www.cve.org/CVERecord?id=CVE-2022-31052
Description:
 Synapse is an open source home server implementation for the Matrix chat
 network. In versions prior to 1.61.1 URL previews of some web pages can
 exhaust the available stack space for the Synapse process due to unbounded
 recursion. This is sometimes recoverable and leads to an error for the
 request causing the problem, but in other cases the Synapse process may
 crash altogether. It is possible to exploit this maliciously, either by
 malicious users on the homeserver, or by remote users sending URLs that a
 local user's client may automatically request a URL preview for. Remote
 users are not able to exploit this directly, because the URL preview
 endpoint is authenticated. Deployments with `url_preview_enabled: false`
 set in configuration are not affected. Deployments with
 `url_preview_enabled: true` set in configuration **are** affected.
 Deployments with no configuration value set for `url_preview_enabled` are
 not affected, because the default is `false`. Administrators of homeservers
 with URL previews enabled are advised to upgrade to v1.61.1 or higher.
 Users unable to upgrade should set `url_preview_enabled` to false.
Ubuntu-Description:
Notes:
Mitigation:
Bugs:
Priority: medium
Discovered-by:
Assigned-to: 
CVSS:
 github: CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H [6.5 MEDIUM]
 nvd: CVSS:3.1/AV:N/AC:L/PR:L/UI:N/S:U/C:N/I:N/A:H [6.5 MEDIUM]


Patches_matrix-synapse:
 upstream: https://github.com/matrix-org/synapse/commit/fa1308061802ac7b7d20e954ba7372c5ac292333
upstream_matrix-synapse: released (1.61.1-1)
trusty_matrix-synapse: DNE
xenial_matrix-synapse: DNE
bionic_matrix-synapse: ignored (end of standard support, was needs-triage)
esm-apps/bionic_matrix-synapse: needs-triage
focal_matrix-synapse: ignored (end of standard support, was needs-triage)
esm-apps/focal_matrix-synapse: needs-triage
impish_matrix-synapse: ignored (end of life)
jammy_matrix-synapse: needs-triage
esm-apps/jammy_matrix-synapse: needs-triage
kinetic_matrix-synapse: not-affected (1.61.1-1)
lunar_matrix-synapse: not-affected (1.61.1-1)
mantic_matrix-synapse: not-affected (1.61.1-1)
noble_matrix-synapse: not-affected (1.61.1-1)
esm-apps/noble_matrix-synapse: not-affected (1.61.1-1)
oracular_matrix-synapse: not-affected (1.61.1-1)

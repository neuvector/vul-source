Candidate: CVE-2024-35195
PublicDate: 2024-05-20 21:15:00 UTC
References:
 https://www.cve.org/CVERecord?id=CVE-2024-35195
 https://github.com/psf/requests/security/advisories/GHSA-9wx4-h78v-vm56
Description:
 Requests is a HTTP library. Prior to 2.32.0, when making requests through a
 Requests `Session`, if the first request is made with `verify=False` to
 disable cert verification, all subsequent requests to the same host will
 continue to ignore cert verification regardless of changes to the value of
 `verify`. This behavior will continue for the lifecycle of the connection
 in the connection pool. This vulnerability is fixed in 2.32.0.
Ubuntu-Description:
Notes:
 mdeslaur> On focal and earlier, the python-pip package bundles requests
 mdeslaur> binaries when built. After updating requests, a no-change
 mdeslaur> rebuild of python-pip is required.
 mdeslaur> On jammy and later, requests is bundled in the python-pip
 mdeslaur> package and needs to be patched.
 mdeslaur>
 mdeslaur> The fix for this issue introduced regressions in certain other
 mdeslaur> applications, such as docker. See
 mdeslaur> https://github.com/docker/docker-py/pull/3257
 mdeslaur> and resulted in 2.32.0 and 2.32.1 in being yanked, see:
 mdeslaur> https://pypi.org/project/requests/#history
 mdeslaur>
 mdeslaur> 2.32.2 and 2.32.3 were subsequently released to fix those
 mdeslaur> regressions.
 mdeslaur>
 mdeslaur> Even with the regression fixes in 2.32.2 and 2.32.3, fixing this
 mdeslaur> may still break applications that subclass HTTPAdapter, for
 mdeslaur> example, cloud-init. See:
 mdeslaur> https://github.com/canonical/cloud-init/pull/5435
 vyomydv> The CVE patch causes a regression. The patch enforced the URL scheme
 vyomydv> to be either `http` or `https`. This broke users that used a custom
 vyomydv> scheme (e.g. `http+docker`) by implementing a custom `get_connection` method
 vyomydv> but used the default `send` method. Patching this CVE would require some
 vyomydv> users to update their source code like:
 vyomydv> https://github.com/docker/docker-py/pull/3257
 vyomydv> python-pip, on focal and earlier versions, bundles requests during the build. 
 vyomydv> Since requests can't be patched due to breaking changes, python-pip has been
 vyomydv> ignored on focal and earlier.
Mitigation:
Bugs:
Priority: medium
Discovered-by:
Assigned-to: vyomydv
CVSS:
 github: CVSS:3.1/AV:L/AC:H/PR:H/UI:R/S:U/C:H/I:H/A:N [5.6 MEDIUM]

Patches_requests:
 upstream: https://github.com/psf/requests/pull/6655
 upstream: https://github.com/psf/requests/commit/a58d7f2ffb4d00b46dca2d70a3932a0b37e22fac
 upstream: https://github.com/psf/requests/commit/aa1461b68aa73e2f6ec0e78c8853b635c76fd099 (2.32.2)
 upstream: https://github.com/psf/requests/commit/e18879932287c2bf4bcee4ddf6ccb8a69b6fc656 (2.32.3)
upstream_requests: needs-triage
trusty/esm_requests: ignored (end of ESM support, was ignored [breaks users, requires source code updates])
esm-infra-legacy/trusty_requests: ignored (breaks users, requires source code updates)
esm-infra/xenial_requests: ignored (breaks users, requires source code updates)
esm-infra/bionic_requests: ignored (breaks users, requires source code updates)
focal_requests: ignored (breaks users, requires source code updates)
jammy_requests: ignored (breaks users, requires source code updates)
mantic_requests: ignored (end of life, was ignored [breaks users, requires source code updates])
noble_requests: ignored (breaks users, requires source code updates)
oracular_requests: released (2.32.3+dfsg-1ubuntu1)
plucky_requests: released (2.32.3+dfsg-1ubuntu1)
devel_requests: released (2.32.3+dfsg-1ubuntu1)

Patches_python-pip:
upstream_python-pip: needs-triage
trusty/esm_python-pip: ignored (end of ESM support, was ignored [bundles requests during build, and requests cannot be patched])
esm-infra-legacy/trusty_python-pip: ignored (bundles requests during build, and requests cannot be patched)
esm-apps/xenial_python-pip: ignored (bundles requests during build, and requests cannot be patched)
esm-apps/bionic_python-pip: ignored (bundles requests during build, and requests cannot be patched)
focal_python-pip: ignored (bundles requests during build, and requests cannot be patched)
esm-apps/focal_python-pip: ignored (bundles requests during build, and requests cannot be patched)
jammy_python-pip: needed
esm-apps/jammy_python-pip: needed
mantic_python-pip: ignored (end of life, was needed)
noble_python-pip: needed
esm-apps/noble_python-pip: needed
oracular_python-pip: needed
plucky_python-pip: needed
devel_python-pip: needed
